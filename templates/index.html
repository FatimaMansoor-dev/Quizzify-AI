<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../static/styles.css">
  <title>QuizXpert</title>
</head>
<body>
  <div class="container">
    <aside>
      <div class="title-overlay">
        <h1>
          <span class="bounce">Q</span>
          <span class="bounce">u</span>
          <span class="bounce">i</span>
          <span class="bounce">z</span>
          <span class="bounce">X</span>
          <span class="bounce">p</span>
          <span class="bounce">e</span>
          <span class="bounce">r</span>
          <span class="bounce">t</span>
        </h1>
        <h2>Ace Your Next Exam Like a PRO!</h2>
      </div>
    </aside>
    <main>
      <div class="overlay">
        <form class="login-form" id="auth-form" action="/login" method="POST">
          <h2 id="form-title">Login</h2>

          {% if message %}
          <p id="message-box" style="color: red; text-align: center;">{{ message }}</p>
          {% endif %}

          <div id="additional-fields" style="display: none;">
            <label for="first-name">First Name</label>
            <input type="text" id="first-name" name="first_name" placeholder="Enter your first name">
            
            <label for="last-name">Last Name</label>
            <input type="text" id="last-name" name="last_name" placeholder="Enter your last name">
          </div>

          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="Enter your email" required>
          
          <label for="password">Password</label>
          <div class="password-container">
            <input type="password" id="password" name="password" placeholder="Enter your password" minlength="9" required>
            <button type="button" class="toggle-password" id="toggle-password">üôà</button>
          </div>
          
          <button type="submit" id="submit-button">Submit</button>
          <p id="toggle-message">
            Don't have an account? 
            <span id="toggle-auth-mode" style="color: blue; cursor: pointer;">Sign Up</span>
          </p>
        </form>
        
        <script>
          const formTitle = document.getElementById('form-title');
          const authForm = document.getElementById('auth-form');
          const toggleMessage = document.getElementById('toggle-message');
          const additionalFields = document.getElementById('additional-fields');

          function toggleFormMode() {
            if (formTitle.textContent === 'Login') {
              formTitle.textContent = 'Sign Up';
              authForm.action = '/signup';
              additionalFields.style.display = 'block'; // Show First Name and Last Name inputs
              toggleMessage.innerHTML = `Already have an account? 
                <span id="toggle-auth-mode" style="color: blue; cursor: pointer;">Login</span>`;
            } else {
              formTitle.textContent = 'Login';
              authForm.action = '/login';
              additionalFields.style.display = 'none'; // Hide First Name and Last Name inputs
              toggleMessage.innerHTML = `Don't have an account? 
                <span id="toggle-auth-mode" style="color: blue; cursor: pointer;">Sign Up</span>`;
            }
            attachToggleListener();
          }

          function attachToggleListener() {
            const toggleAuthMode = document.getElementById('toggle-auth-mode');
            toggleAuthMode.addEventListener('click', toggleFormMode);
          }

          attachToggleListener();

          const togglePassword = document.getElementById('toggle-password');
          const passwordField = document.getElementById('password');

          togglePassword.addEventListener('click', () => {
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            togglePassword.textContent = type === 'password' ? 'üôà' : 'üëÅÔ∏è';
          });
        </script>
      </div>
    </main>
  </div>
</body>
</html>
